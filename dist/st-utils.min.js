!function(){"use strict";angular.module("utils",[])}(),function(){"use strict";function e(e,t){function n(t){var n=e.defer();return a=c(),u?a?n.resolve(r(t)):n.reject():n.resolve(i()),n.promise}function r(e){var t=[];return Object.keys(a).forEach(function(n){a[n].bindedItems.includes(e)&&(t=t.concat(a[n].data))}),t}function o(e){c=e,u=!0}function i(){return[{value:"Atroveran"},{value:"Paracetamol"},{value:"Dorflex"},{value:"Cataflan"},{value:"Tylenol"}]}var a,u,s=this,c=function(){};s.fetchDatasources=n,s.provideDatasourcesAddress=o}angular.module("utils").service("otusjs.utils.DatasourceService",e),e.$inject=["$q"]}(),function(){"use strict";function e(e,r){function o(t){var n=e.defer();return a=t,s=!0,n.resolve(!0),n.promise}function i(){return s?new t(e,a,r):new n(e)}var a,u=this,s=!1;return u.setUploadInterface=o,u.getUploadInterface=i,u}function t(e,t,n){function r(){c=n.surveyActivity.participantData.recruitmentNumber,d=null,l={}}function o(n,r){l[n.control]=e.defer();var o=n.type,i=n.name,a=n.size,u=n.lastModifiedDate.toISOString(),s=new FormData;return s.append("file",n),s.append("item_id",r),s.append("recruitment_number",c),s.append("interviewer",d),s.append("sent_date",u),s.append("name",i),s.append("type",o),s.append("size",a),t.post(s,l[n.control].promise)}function i(e){l[e].resolve(!0)}function a(n){var r=e.defer();return t.getByOID(n.oid).then(function(e){r.resolve(s(e.data,n))},function(e){r.reject(e)}),r.promise}function u(e){return t.deleteByOID(e)}function s(e,t){var n=new File([e],t.name,{type:t.type});return n}var c,l,d,f=this;r(),f.uploadFile=o,f.getFile=a,f.deleteFile=u,f.cancelRequest=i}function n(e){function t(){var t=e.defer(),n={data:{data:"fakeOID"}};return t.resolve(n),t.promise}var n=this;n.uploadFile=t,n.getFile=t,n.deleteFile=t}angular.module("utils").factory("otusjs.utils.FileUploadFactory",e),e.$inject=["$q","otusjs.model.activity.ActivityFacadeService"]}();var global=window||global;global.GeoJSON=function(){"use strict";function e(){function e(){function e(){if(!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");navigator.geolocation.getCurrentPosition(t,n)}function t(e){r.type="point",r.coordinates=[0,0],r.coordinates[0]=e.coords.latitude,r.coordinates[1]=e.coords.longitude}function n(e){switch(e.code){case e.PERMISSION_DENIED:throw new Error("User denied the request for Geolocation.");case e.POSITION_UNAVAILABLE:throw new Error("Location information is unavailable.");case e.TIMEOUT:throw new Error("The request to get user location timed out.");case e.UNKNOWN_ERROR:throw new Error("An unknown error occurred.")}return null}var r=this;return e(),r}var t=function(){return new e};return t}return angular.module("utils").factory("GeoJSON",e),e()}();var ImmutableDate=function(){"use strict";function e(){function e(e){function t(e){m.date.setHours(e)}function n(){return m.date.getHours()}function r(e){m.date.setMinutes(e)}function o(){return m.date.getMinutes()}function i(e){m.date.setSeconds(e)}function a(){return m.date.getSeconds()}function u(e){m.date.setMilliseconds(e)}function s(e){m.date.setDate(e)}function c(e){m.date.setMonth(e)}function l(e){m.date.setFullYear(e)}function d(){return m.date.getTime()}function f(){m.date&&(m.date.setDate(1),m.date.setMonth(0),m.date.setFullYear(1970))}function v(){m.date&&(m.date.setHours(0),m.date.setMinutes(0),m.date.setSeconds(0),m.date.setMilliseconds(0))}function g(){return{objectType:m.objectType,value:m.toString()}}function h(){if(!m.date)return null;var e=new Date(m.date.getTime()),t=""+e.getFullYear(),n=p(e.getMonth()+1,2),r=p(e.getDate(),2),o=p(e.getHours(),2),i=p(e.getMinutes(),2),a=p(e.getSeconds(),2),u=p(e.getMilliseconds(),3);return t+"-"+n+"-"+r+" "+o+":"+i+":"+a+"."+u}function p(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}var m=this;return m.objectType="ImmutableDate",m.date=e.getTime()?e:void 0,m.toJSON=g,m.setHours=t,m.getHours=n,m.setMinutes=r,m.getMinutes=o,m.setSeconds=i,m.getSeconds=a,m.setMilliseconds=u,m.setDate=s,m.setMonth=c,m.setFullYear=l,m.getTime=d,m.resetDate=f,m.resetTime=v,m.toString=h,m}var t=function(){var t;return t=Object.values(arguments).length?new Date(Object.values(arguments)):new Date,new e(t)};return t}return angular.module("utils").factory("otusjs.utils.ImmutableDate",e),e.$inject=[],e()}(),global=window||global;global.ObjectId=function(){"use strict";function e(){function e(e){var t=function(){var e=((new Date).getTime()/1e3|0).toString(16);return e+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)}).toLowerCase()},n=new RegExp(/^(?=[a-f\d]{24}$)(\d+[a-f]|[a-f]+\d)/i);if(e){var r;if(r=e.hasOwnProperty("$oid")?e.$oid:e,!n.test(r))throw new Error("Invalid value for ObjectId.");this.$oid=r}else this.$oid=t();return this}var t=function(t){return new e(t)};return e.prototype.toString=function(){return"".concat(this.$oid)},t}return angular.module("utils").factory("ObjectId",e),e()}(),function(){"use strict";function e(e){function t(e){var t={threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["value"]};return new r(e,t)}function n(e){var t={shouldSort:!0,tokenize:!0,threshold:.2,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["name","stringfiedRN"]};return new r(e,t)}function r(t,n){function r(t){var n=e.defer();return n.resolve(t?o(t):[]),n.promise}function o(e){var t=u.search(e);return t}var i=this,a=n||{threshold:.2,maxPatternLength:10,minMatchCharLength:1,location:0,distance:50,keys:["value"]},u=new Fuse(t,a);i.perform=r}var o=this;return o.newStringSearch=t,o.newParticipantFilter=n,o}angular.module("utils").factory("otusjs.utils.SearchQueryFactory",e),e.$inject=["$q"]}(),function(){"use strict";function e(){function e(e){var n;if(e>t.length-1){var r=e/t.length,o=e%t.length;n=t.charAt(r-1)+t.charAt(o)}else n=t.charAt(e);return n}var t="abcdefghijklmnopqrstuvwxyz",n=this;n.generateSuffixByOptionsLength=e}angular.module("utils").service("otusjs.model.utils.AlphabetSuffixIDGenerator",e)}(),function(){"use strict";function e(){function e(e){for(var t=e.indexOf("-")!=-1?"-":".",n=e.split(t),r=n.length,o=n[0].toLowerCase(),i=1;i<r;i++){var a=n[i].slice(0,1),u=n[i].slice(1);o=o.concat(a.toUpperCase().concat(u.toLowerCase()))}return o}var t=this;t.normalizeString=e}angular.module("utils").service("StringNormalizer",e)}(),function(){"use strict";function e(e,t){function n(){var n="userUUID:["+e.sessionStorage.userUUID+"]",r="surveyUUID:["+t.generateUUID()+"]",o="repositoryUUID:[ Not done yet ]";return Base64.encode(n+r+o)}var r=this;r.generateSurveyUUID=n}angular.module("utils").service("SurveyUUIDGenerator",e),e.$inject=["$window","UUIDService"]}(),function(){"use strict";function e(){function e(){return uuid.v1()}var t=this;t.generateUUID=e}angular.module("utils").service("UUIDService",e)}(),function(){"use strict";function e(){function e(e,t){return e.isAvailableID(t)}var t=this;t.isAvailable=e}angular.module("utils").service("ValidatorIDService",e)}(),function(){"use strict";function e(e){function t(e,t,r){function o(e){var t=n(e);return""!==t?(i=document.createElement("input"),i.setAttribute("type","file"),i.setAttribute("accept",t),c&&i.setAttribute("multiple",c)):i=document.createElement("button"),i}var i,a=e.uploadTool,u=a.callback||{},s=a.type||"any",c=a.multiple||!1;t.on("click",function(e){i=o(s),i.click(),i.addEventListener("change",function(){for(var e=[],t=0;t<this.files.length;t++)e.push(this.files[t]);0!==e.length&&u(e)})})}function n(e){var t="";if(e){e=e.replace(/\s/g,"").split(",");for(var n=0;n<e.length;n++){var o=r(e[n]);o&&(t+=o+", ")}}return t||"any"}function r(e){var t={image:"image/*",jpg:".jpg",png:".png",json:".json"};return t[e]}var o={restrict:"A",link:t,scope:{uploadTool:"="}};return o}angular.module("utils").directive("uploadTool",e),e.$inject=[]}();