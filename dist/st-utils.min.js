!function(){"use strict";angular.module("utils",[])}(),function(){"use strict";function e(e,t){function n(t){var n=e.defer();return u=c(),o?u?n.resolve(r(t)):n.reject():n.resolve(a()),n.promise}function r(e){var t=[];return Object.keys(u).forEach(function(n){u[n].bindedItems.includes(e)&&(t=t.concat(u[n].data))}),t}function i(e){c=e,o=!0}function a(){return[{value:"Atroveran"},{value:"Paracetamol"},{value:"Dorflex"},{value:"Cataflan"},{value:"Tylenol"}]}var u,o,s=this,c=function(){};s.fetchDatasources=n,s.provideDatasourcesAddress=i}angular.module("utils").service("otusjs.utils.DatasourceService",e),e.$inject=["$q"]}(),function(){"use strict";function e(e,r){function i(t){var n=e.defer();return u=t,s=!0,n.resolve(!0),n.promise}function a(){return s?new t(e,u,r):new n(e)}var u,o=this,s=!1;return o.setUploadInterface=i,o.getUploadInterface=a,o}function t(e,t,n){function r(){c=n.surveyActivity.participantData.recruitmentNumber,f=n.getInterviewer().email,l={}}function i(n,r){l[n.control]=e.defer();var i=n.type,a=n.name,u=n.size,o=n.lastModifiedDate.toISOString(),s=new FormData;return s.append("file",n),s.append("item_id",r),s.append("recruitment_number",c),s.append("interviewer",f),s.append("sent_date",o),s.append("name",a),s.append("type",i),s.append("size",u),t.post(s,l[n.control].promise)}function a(e){l[e].resolve(!0)}function u(n){var r=e.defer();return t.getByOID(n.oid).then(function(e){r.resolve(s(e.data,n))},function(e){r.reject(e)}),r.promise}function o(e){return t.deleteByOID(e)}function s(e,t){var n=new File([e],t.name,{type:t.type});return n}var c,l,f,d=this;r(),d.uploadFile=i,d.getFile=u,d.deleteFile=o,d.cancelRequest=a}function n(e){function t(){var t=e.defer(),n={data:{data:"fakeOID"}};return t.resolve(n),t.promise}var n=this;n.uploadFile=t,n.getFile=t,n.deleteFile=t}angular.module("utils").factory("otusjs.utils.FileUploadFactory",e),e.$inject=["$q","otusjs.model.activity.ActivityFacadeService"]}();var ImmutableDate=function(){"use strict";function e(){function e(e){function t(e){m.date.setHours(e)}function n(){return m.date.getHours()}function r(e){m.date.setMinutes(e)}function i(){return m.date.getMinutes()}function a(e){m.date.setSeconds(e)}function u(){return m.date.getSeconds()}function o(e){m.date.setMilliseconds(e)}function s(e){m.date.setDate(e)}function c(e){m.date.setMonth(e)}function l(e){m.date.setFullYear(e)}function f(){return m.date.getTime()}function d(){m.date&&(m.date.setDate(1),m.date.setMonth(0),m.date.setFullYear(1970))}function v(){m.date&&(m.date.setHours(0),m.date.setMinutes(0),m.date.setSeconds(0),m.date.setMilliseconds(0))}function g(){return{objectType:m.objectType,value:m.toString()}}function p(){if(!m.date)return null;var e=new Date(m.date.getTime()),t=""+e.getFullYear(),n=h(e.getMonth()+1,2),r=h(e.getDate(),2),i=h(e.getHours(),2),a=h(e.getMinutes(),2),u=h(e.getSeconds(),2),o=h(e.getMilliseconds(),3);return t+"-"+n+"-"+r+" "+i+":"+a+":"+u+"."+o}function h(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}var m=this;return m.objectType="ImmutableDate",m.date=e.getTime()?e:void 0,m.toJSON=g,m.setHours=t,m.getHours=n,m.setMinutes=r,m.getMinutes=i,m.setSeconds=a,m.getSeconds=u,m.setMilliseconds=o,m.setDate=s,m.setMonth=c,m.setFullYear=l,m.getTime=f,m.resetDate=d,m.resetTime=v,m.toString=p,m}var t=function(){var t;return t=Object.values(arguments).length?new Date(Object.values(arguments)):new Date,new e(t)};return t}return angular.module("utils").factory("otusjs.utils.ImmutableDate",e),e.$inject=[],e()}();!function(){"use strict";function e(e){function t(e){var t={threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["value"]};return new r(e,t)}function n(e){var t={shouldSort:!0,tokenize:!0,threshold:.2,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["name","stringfiedRN"]};return new r(e,t)}function r(t,n){function r(t){var n=e.defer();return n.resolve(t?i(t):[]),n.promise}function i(e){var t=o.search(e);return t}var a=this,u=n||{threshold:.2,maxPatternLength:10,minMatchCharLength:1,location:0,distance:50,keys:["value"]},o=new Fuse(t,u);a.perform=r}var i=this;return i.newStringSearch=t,i.newParticipantFilter=n,i}angular.module("utils").factory("otusjs.utils.SearchQueryFactory",e),e.$inject=["$q"]}(),function(){"use strict";function e(){function e(e){var n;if(e>t.length-1){var r=e/t.length,i=e%t.length;n=t.charAt(r-1)+t.charAt(i)}else n=t.charAt(e);return n}var t="abcdefghijklmnopqrstuvwxyz",n=this;n.generateSuffixByOptionsLength=e}angular.module("utils").service("otusjs.model.utils.AlphabetSuffixIDGenerator",e)}(),function(){"use strict";function e(){function e(e){for(var t=e.indexOf("-")!=-1?"-":".",n=e.split(t),r=n.length,i=n[0].toLowerCase(),a=1;a<r;a++){var u=n[a].slice(0,1),o=n[a].slice(1);i=i.concat(u.toUpperCase().concat(o.toLowerCase()))}return i}var t=this;t.normalizeString=e}angular.module("utils").service("StringNormalizer",e)}(),function(){"use strict";function e(e,t){function n(){var n="userUUID:["+e.sessionStorage.userUUID+"]",r="surveyUUID:["+t.generateUUID()+"]",i="repositoryUUID:[ Not done yet ]";return Base64.encode(n+r+i)}var r=this;r.generateSurveyUUID=n}angular.module("utils").service("SurveyUUIDGenerator",e),e.$inject=["$window","UUIDService"]}(),function(){"use strict";function e(){function e(){return uuid.v1()}var t=this;t.generateUUID=e}angular.module("utils").service("UUIDService",e)}(),function(){"use strict";function e(){function e(e,t){return e.isAvailableID(t)}var t=this;t.isAvailable=e}angular.module("utils").service("ValidatorIDService",e)}(),function(){"use strict";function e(e){function t(e,t,r){function i(e){var t=n(e);return""!==t?(a=document.createElement("input"),a.setAttribute("type","file"),a.setAttribute("accept",t),c&&a.setAttribute("multiple",c)):a=document.createElement("button"),a}var a,u=e.uploadTool,o=u.callback||{},s=u.type||"any",c=u.multiple||!1;t.on("click",function(e){a=i(s),a.click(),a.addEventListener("change",function(){for(var e=[],t=0;t<this.files.length;t++)e.push(this.files[t]);0!==e.length&&o(e)})})}function n(e){var t="";if(e){e=e.replace(/\s/g,"").split(",");for(var n=0;n<e.length;n++){var i=r(e[n]);i&&(t+=i+", ")}}return t||"any"}function r(e){var t={image:"image/*",jpg:".jpg",png:".png",json:".json"};return t[e]}var i={restrict:"A",link:t,scope:{uploadTool:"="}};return i}angular.module("utils").directive("uploadTool",e),e.$inject=[]}();